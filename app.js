'use strict'
const express = require('express')
const bodyParser = require('body-parser')
const app = express().use(bodyParser.json())
const token = 'Trgky678bhh87Rdc93bhhiyQ'
const testId = 8240105
app.get('/', (req, res) => {
	if (req.query.token !== token) {
		return res.sendStatus(401)
	}
	return res.end(req.query.challenge)
})
app.post('/', (req, res) => {
	if (req.query.token !== token) {
		return res.sendStatus(401)
	}
	const arrIds = [
		testId,
		8815791,
		8870922,
		8820618,
		8956113,
		8505059,
		8966788,
		8664101,
		8987475,
		9274147,
		9215893,
		9360013,
		8635643,
		8824171,
		9217236,
		9596761,
		8820063,
		9220903,
		9358271,
		8941696,
		9169201,
		9222253,
		8960133,
		9315653,
		8987371,
		8914894,
		9495034,
		8774961,
		9318339,
		9159792,
		9017608,
		10063696,
		9002326,
		9364065,
		8609028,
		9380905,
		9053339,
		8941190,
		8956967,
		8775932,
		8993276,
		8774735,
		9372371,
		9174548,
		9170955,
		9024452,
		9487225,
		8924466,
		9526707,
		9316304,
		9376176,
		9347846,
		8750654,
		8683020,
		9347924,
		8813106,
		9370569,
		9450400,
		8814576,
		8983809,
		8814122,
		10108909,
		9269107,
		9441100,
		8996593,
		9281165,
		10116591,
		9046771,
		9261494,
		9222664,
		9331196,
		9390998,
		9251503,
		8952563,
		8693233,
		9352179,
		9015614,
		8573762,
		10106969,
		8577915,
		8784970,
		9172642,
		10059868,
		9391663,
		9582769,
		9216866,
		8947682,
		8519419,
		9356547,
		8960628,
		9009960,
		8871633,
		8952125,
		8805084,
		9170345,
		9287021,
		8942367,
		8944285,
		9218940,
		9157340,
		8995240,
		8980642,
		9115955,
		9472782,
		8775379,
		10082024,
		9395433,
		9251925,
		9332459,
		9454424,
		8931786,
		10245106,
		9457478,
		9221013,
		9009674,
		9317423,
		9203833,
		9338744,
		9280116,
		9004614,
		9065405,
		9488713,
		9390618,
		9008993,
		9040888,
		8828121,
		9305355,
		8971143,
		9174804,
		8823726,
		9005521,
		9574339,
		8809061,
		9474015,
		8798924,
		9052972,
		9306162,
		8764706,
		9210124,
		8887631,
		8966564,
		8759002,
		9338632,
		8871045,
		8954305,
		9210325,
		9525819,
		9507648,
		8681452,
		8934687,
		9053199,
		9295055,
		8951467,
		9544711,
		8942798,
		9184609,
		9541384,
		8871622,
		10122865,
		8940757,
		9259675,
		10132370,
		9421064,
		8940977,
		10095976,
		10083603,
		8877694,
		9333555,
		9448912,
		9390119,
		9426792,
		9286443,
		8638061,
		9543493,
		8653829,
		9308713,
		9346660,
		9047099,
		9312745,
		8922830,
		9039231,
		10158587,
		9322049,
		8943907,
		9053537,
		8983821,
		10150909,
		9234195,
		9407489,
		9221790,
		8704265,
		9166342,
		9020832,
		8876274,
		10103194,
		8917981,
		9241717,
		9013994,
		8935982,
		9312969,
		8795807,
		9489169,
		9505579,
		8803763,
		9346651,
		10057816,
		8859989,
		9506890,
		9294692,
		9061108,
		9294968,
		9008240,
		9015425,
		8889507,
		9307632,
		9305928,
		9562552,
		9054282,
		8982259,
		8870263,
		9019138,
		8761698,
		9275345,
		8735907,
		9013152,
		9422199,
		8882518,
		9015284,
		8646520,
		9183106,
		9392346,
		9124600,
		9195231,
		9588814,
		9049222,
		8973452,
		9317272,
		9236457,
		8812199,
		9308671,
		8885276,
		9336310,
		9351766,
		9349058,
		10107419,
		9592664,
		9262133,
		8842221,
		8972033,
		8877375,
		8876987,
		8871839,
		9236770,
		8792374,
		8919764,
		9044584,
		9152763,
		9312022,
		9307284,
		10163224,
		8849687,
		8981629,
		9539806,
		9416543,
		9185062,
		9556183,
		9387248,
		8885297,
		10064275,
		10080409,
		9570493,
		8971489,
		9575132,
		9152261,
		9001780,
		9488060,
		8637129,
		9176525,
		10142066,
		10139005,
		10203290,
		8944680,
		9347134,
		8744964,
		8922089,
		8763624,
		8883626,
		9003017,
		8989865,
		8934271,
		10085110,
		9003803,
		9420373,
		8947456,
		8720406,
		10096133,
		9604276,
		8962498,
		10083908,
		9274599,
		8845199,
		9330055,
		9286977,
		8784122,
		9176332,
		8828312,
		9058589,
		8763240,
		8945814,
		10235917,
		9014017,
		9237048,
		9183361,
		8898170,
		9467958,
		9425808,
		8889570,
		9541009,
		9402629,
		8849738,
		9462122,
		10148717,
		8656841,
		9372948,
		8862487,
		9040425,
		10235800,
		10060654,
		9150676,
		8916034,
		8965803,
		8917163,
		9421892,
		9233607,
		9397108,
		8972677,
		9457075,
		9268326,
		9290409,
		8984816,
		9311739,
		8835802,
		9372213,
		9345697,
		9176622,
		9403187,
		8909772,
		8889697,
		9274920,
		9586881,
		9286887,
		9294330,
		9290157,
		9018016,
		10245325,
		9441688,
		8726804,
		9029416,
		9593444,
		9266857,
		8972643,
		9284762,
		9282271,
		9204448,
		8974514,
		9237439,
		10030744,
		8775920,
		9280129,
		8966213,
		9032575,
		10101594,
		9332268,
		9406620,
		9053449,
		9282572,
		10190320,
		10142934,
		10129889,
		9917612,
		9349747,
		9194387,
		9027959,
		8956653,
		9238083,
		8731156,
		9392480,
		10162288,
		9006684,
		9308530,
		9490926,
		8999533,
		8945547,
		8918868,
		8924489,
		8997997,
		8911543,
		8912456,
		9481145,
		8981562,
		8879218,
		10062381,
		10123928,
		9576880,
		9041132,
		10170681,
		9502981,
		9443428,
		9203937,
		8939260,
		10083214,
		8970016,
		9363683,
		9020528,
		9551161,
		9289193,
		9505284,
		9202240,
		10059245,
		8982250,
		9248676,
		10201007,
		9289130,
		9374021,
		9335413,
		8901370,
		9168649,
		9041262,
		10106011,
		9317973,
		8819320,
		10073809,
		8928230,
		9046784,
		10105765,
		8971008,
		9204420,
		8941279,
		8729644,
		9216419,
		8868770,
		9167624,
		9174879,
		9286880,
		9068920,
		9613076,
		9244201,
		10115496,
		9397252,
		8867634,
		9333617,
		8942088,
		9467501,
		9231432,
		9287738,
		10115911,
		9386308,
		9252606,
		9473230,
		9383792,
		9344114,
		9176447,
		10081287,
		8694112,
		8936503,
		8982831,
		9267631,
		10122196,
		9260049,
		8964768,
		9444106,
		8729115,
		8692323,
		9237852,
		9603051,
		9196122,
		9150869,
		8823322,
		9495018,
		9176928,
		10058357,
		9576097,
		9167951,
		8996552,
		8966861,
		8901004,
		8882941,
		8876160,
		8871799,
		8828478,
		8680568,
		9190294,
		10146394,
		10094065,
		9416430,
		9210818,
		9357465,
		9284312,
		9020325,
		9067372,
		9390023,
		9231897,
		8870555,
		9609957,
		9319960,
		10085239,
		9444699,
		9357402,
		9489910,
		9399777,
		9222017,
		8737319,
		9540886,
		9471366,
		9361904,
		9599453,
		9205421,
		9601641,
		9295175,
		8559904,
		9010792,
		9596706,
		9469709,
		9035076,
		8590190,
		9152400,
		9188082,
		9029768,
		8793723,
		10209706,
		9455528,
		9287661,
		8988057,
		8882617,
		10153154,
		9288542,
		8801591,
		8987179,
		9217122,
		8900168,
		8888360,
		9505617,
		9304931,
		8980324,
		9020328,
		9583834,
		9289755,
		9218397,
		10081119,
		9409808,
		9282104,
		9576877,
		9498898,
		10088344,
		9398319,
		8618050,
		8954197,
		8756170,
		8950490,
		9360709,
		8703537,
		9393980,
		9307709,
		9023967,
		9366722,
		10108534,
		10108117,
		9551821,
		9393896,
		9379205,
		8729895,
		8946899,
		9034013,
		8946676,
		10080851,
		9439007,
		9426766,
		8882958,
		9245902,
		8925894,
		9469964,
		10121600,
		10073092,
		9490140,
		9425220,
		9395989,
		9359256,
		9296357,
		9548853,
		9176019,
		9351392,
		9276282,
		8830452,
		9182572,
		10065799,
		8928889,
		8969934,
		10152862,
		10075836,
		9495541,
		9270803,
		9008989,
		8993688,
		8997889,
		9362503,
		9043975,
		8955359,
		8923618,
		9212397,
		10148763,
		9330315,
		8959429,
		9265523,
		9455041,
		9205059,
		9043985,
		10243693,
		8973806,
		9386941,
		9170089,
		8682261,
		8965632,
		9000687,
		9252515,
		9171090,
		9375948,
		10191953,
		10085929,
		9329649,
		8928730,
		9017597,
		9047249,
		9049197,
		9066429,
		9328448,
		10102426,
		9582166,
		9351761,
		9033918,
		10150557,
		10125644,
		9590068,
		9574228,
		9491243,
		9424076,
		9314965,
		8988346,
		9067901,
		8783983,
		8897781,
		8840372,
		9390269,
		8934769,
		8981426,
		8886351,
		9352144,
		9509814,
		8657585,
		9205867,
		8581520,
		9040876,
		9247050,
		9303737,
		8919263,
		8695021,
		9227353,
		8674696,
		9596117,
		9527755,
		9470752,
		9448547,
		9319345,
		9002527,
		9059240,
		9223454,
		9028919,
		9049164,
		9367488,
		9320118,
		9313253,
		9287503,
		8921542,
		9347955,
		9330093,
		10237086,
		9294777,
		9290452,
		9262501,
		8911264,
		9359658,
		9209357,
		9470287,
		9268911,
		10195184,
		9403212,
		8961046,
		8933055,
		9541979,
		9335007,
		9288822,
		9020279,
		8922618,
		9008112,
		10169235,
		9414576,
		9347892,
		9323126,
		8942440,
		10089141,
		9583128,
		9040133,
		9068238,
		9392156,
		9301883,
		8991813,
		9414816,
		9210762,
		9254562,
		8987980,
		9215093,
		9001583,
		9511960,
		9317550,
		9380183,
		9446638,
		9338426,
		10226639,
		10201787,
		9561654,
		9407369,
		9347021,
		9009856,
		10061452,
		9449113,
		10110041,
		9361585,
		9560744,
		8928935,
		8913310,
		10156961,
		9299400,
		8998135,
		9457117,
		8948289,
		9562424,
		9431691,
		9347337,
		9314961,
		9046298,
		9189322,
		10032777,
		9525798,
		9330968,
		9217083,
		9349301,
		10171834,
		9569040,
		9377753,
		9286616,
		9273515,
		10154429,
		10257128,
		10134759,
		9364307,
		9320547,
		9447124,
		8629743,
		9237089,
		9317490,
		9470660,
		9396986,
		9396490,
		9387942,
		9342344,
		10239504,
		10104357,
		9593133,
		9331175,
		9047585,
		9023253,
		9207581,
		9018850,
		9202656,
		8879156,
		8930351,
		10266212,
		10243925,
		10172110,
		10108600,
		9235015,
		8859411,
		9499422,
		9441448,
		8854137,
		8686761,
		8645236,
		9472631,
		9379751,
		10129178,
		9302856,
		9176278,
		8861571,
		9507743,
		9247166,
		9041458,
		8754368,
		9594545,
		9562175,
		9541763,
		9506096,
		9430051,
		9405439,
		9223480,
		9011960,
		8781946,
		9057082,
		9218260,
		10260063,
		8939472,
		10112019,
		10128898,
		9437270,
		9417173,
		9408184,
		9223669,
		8895494,
		9426114,
		9176674,
		9034558,
		9303077,
		10206879,
		10116662,
		10106942,
		10063996,
		9540773,
		9289337,
		10141517,
		8948525,
		9190606,
		9034752,
		9000607,
		10209092,
		9522309,
		9308323,
		8685330,
		8634161,
		9029468,
		9012345,
		10089687,
		9468534,
		9438280,
		9183487,
		8704096,
		9247527,
		9467344,
		9436913,
		9335974,
		8808175,
		9516972,
		9415421,
		8862653,
		9362869,
		9155498,
		8832268,
		9175993,
		9027539,
		8669835,
		8743185,
		9345883,
		8964676,
		8972349,
		8941989,
		10196788,
		10150429,
		9566942,
		9551764,
		9440797,
		9365083,
		8929895,
		10253844,
		9226170,
		8859022,
		9020195,
		9153653,
		9482747,
		9373304,
		9372315,
		9294609,
		9011062,
		9038620,
		10154262,
		9586820,
		9548441,
		9504458,
		9371233,
		9329976,
		8921231,
		9375175,
		8542549,
		9023213,
		8784616,
		10234414,
		9586700,
		8808935,
		9047345,
		8867370,
		8845542,
		8782359,
		9068640,
		10106921,
		8997702,
		9612862,
		9529910,
		8930162,
		8930524,
		9177453,
		9269003,
		8940669,
		9011375,
		9031389,
		10061412,
		9580171,
		9532176,
		9402501,
		9392109,
		9262157,
		9227888,
		8952670,
		8992807,
		9249333,
		8931150,
		9183062,
		10205413,
		10109346,
		9431280,
		9413928,
		9329487,
		9295066,
		9388034,
		9151092,
		8911382,
		9003871,
		8997890,
		10237418,
		9483772,
		9343779,
		9295812,
		9154082,
		9277144,
		9010842,
		8919700,
		8732749,
		8812819,
		9324128,
		9168032,
		9336814,
		8741807,
		8908710,
		9171307,
		8800054,
		9206244,
		9032474,
		9472632,
		9332032,
		10226944,
		10210688,
		9263262,
		8711468,
		9185476,
		8997052,
		8799748,
		8888490,
		10163085,
		9609078,
		9510005,
		9506046,
		9449861,
		9443416,
		9436836,
		9357524,
		9351854,
		9322025,
		10109645,
		9069039,
		10165559,
		8664440,
		10142502,
		10114759,
		9055590,
		8981409,
		10062079,
		9407688,
		9313627,
		8854139,
		8682074,
		9481438,
		9332855,
		8863686,
		8829381,
		8944753,
		9460941,
		9218240,
		8935802,
		8940964,
		9351732,
		9448957,
		9219348,
		9583353,
		9342590,
		8940976,
		9010766,
		8847034,
		9018071,
		8884557,
		10271555,
		9432748,
		9430312,
		8722772,
		8972359,
		8683840,
		9012378,
		9037330,
		8928145,
		9608824,
		9587883,
		9336555,
		9219539,
		8987843,
		9003686,
		9321424,
		9281742,
		10162950,
		10154085,
		9563424,
		9407594,
		9329821,
		9302176,
		8845213,
		8824565,
		10115210,
		9606350,
		10130810,
		9583491,
		9568569,
		9421463,
		9373018,
		9324507,
		9316762,
		9253378,
		9237715,
		8957707,
		9300615,
		9394960,
		9325178,
		9151981,
		8866929,
		8901092,
		8823301,
		9036312,
		10178810,
		10183894,
		8940842,
		10240282,
		10151601,
		10088872,
		10074094,
		9515783,
		9509173,
		9491705,
		9482269,
		9452846,
		9379588,
		9373955,
		9342642,
		9318980,
		10066336,
		8717498,
		8941793,
		8967824,
		8968085,
		8955392,
		9216531,
		9423194,
		8877801,
		10222049,
		8702662,
		8891475,
		8858806,
		9248119,
		9067884,
		9457049,
		9434023,
		9380318,
		9363669,
		9355970,
		9315556,
		9301003,
		8937599,
		8744455,
		9240905,
		9183219,
		8737197,
		9575294,
		9387461,
		9379575,
		9281776,
		9029578,
		9360244,
		9297791,
		8957547,
		9225097,
		8856817,
		9322979,
		10235409,
		10102453,
		9585344,
		9574413,
		9469613,
		9449203,
		10222367,
		8644202,
		9024861,
		9426031,
		10166280,
		10145216,
		9506888,
		9447398,
		9300604,
		9296697,
		9293272,
		9195342,
		8801586,
		8692001,
		9054281,
		9286487,
		9246921,
		9005578,
		9005425,
		9615590,
		8651502,
		9438872,
		10095547,
		9277640,
		10149597,
		10085786,
		10080946,
		9454759,
		9380774,
		9315503,
		9235737,
		8794049,
		8974801,
		9301500,
		9473928,
		8855624,
		8820794,
		9008935,
		8922960,
		10116209,
		9441227,
		9440408,
		9412459,
		9356526,
		9292621,
		9216732,
		8762175,
		9058052,
		8942634,
		8926008,
		8728855,
		10189633,
		8782465,
		9595162,
		9393911,
		9220490,
		8952884,
		10212783,
		9490611,
		9366724,
		9333184,
		9012660,
		9262906,
		8858789,
		9041138,
		9391623,
		10114995,
		9581803,
		9386392,
		10127129,
		9005788,
		9030326,
		8986942,
		10188065,
		10171646,
		10136388,
		10096489,
		10088513,
		10060084,
		9542464,
		9523796,
		9448004,
		9358381,
		9325884,
		9051050
	]
	console.log(req.body)
	const defaultReq = {
		responses: [
			{
				type: 'randomText',
				messages: ['Hi', 'Hello']
			}
		],
		attributes: {
			VIP: 'no'
		}
	}
	const customReq = {
		responses: [
			{
				type: 'randomText',
				messages: ['Hi!!!', 'Hello!!!']
			}
		],
		attributes: {
			VIP: 'yes'
		}
	}
	const data = arrIds.includes(req.body.attributes.default_PLAYERID) ? customReq : defaultReq
	res.json(data)
})
app.get('/test', (req, res) => {
	const data = {
		responses: [
			{
				type: 'randomText',
				messages: ['Hi', 'Hello']
			}
		]
	}
	res.json(data)
})
app.listen(3000, () => console.log('[ChatBot] Webhook is listening'))
